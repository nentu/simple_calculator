ORG 0x5 				;Умножение на 10
TEN_MULT: CLC
LD &0x1
ROL
ROL
ROL
ADD &0x1
ADD &0x1
SWAP
ST &0x1
POP
RET

ORG 0X20
PRINT: 
S1: IN 0xD
AND #0x40
BEQ S1
LD &0x1
ADD #0X30
OUT 0xC
SWAP
ST &0x1
SWAP
SWAP
POP
RET

ORG 0xA0
LIST_START: WORD 0xE0
LIST_POINTER: WORD 0x0
OPER_POINTER: WORD 0x0

START: CLA
LD LIST_START
ST LIST_POINTER
ST OPER_POINTER
LD #0x0
PUSH

MAIN_LOOP: 
INPUT: IN 0x1D
AND #0x40
BEQ INPUT
CLA
IN 0x1C

CMP #0xA             ;Не цифра
BPL INPUT_FINISH

SWAP
PUSH
CALL $TEN_MULT
ADD &0

SWAP
JUMP INPUT

INPUT_FINISH: 
SWAP
ST (LIST_POINTER)+
CLA
SWAP
CMP #0xE 				;Точка
BEQ MAIN_LOOP
CMP #0xB 				;Плюс
BEQ PLUS
CMP #0xA 				;Минус
BEQ MINUS
CMP #0xF 				;Минус
BEQ SHOW
JUMP MAIN_LOOP

PLUS:LD (OPER_POINTER)+
ADD (OPER_POINTER)
ST (OPER_POINTER)
JUMP MAIN_LOOP

MINUS:LD (OPER_POINTER)+
SUB (OPER_POINTER)
ST (OPER_POINTER)
JUMP MAIN_LOOP

SHOW:LD (OPER_POINTER)
PUSH
CALL $PRINT
HLT
JUMP MAIN_LOOP